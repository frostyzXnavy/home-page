<!DOCTYPE html>
<html>
<head>
  <title>Zero Violet Tab</title>
  <style>
    :root { --main: #eeeeee; --alt: #1d81b2; --bg: #1a1a1a; }
    html, body { height: 100%; margin: 0; background: var(--bg); overflow: hidden; position: relative; }
    
    body::before {
      content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
      background: url('https://grainy-gradients.vercel.app/noise.svg');
      opacity: 0.04; pointer-events: none; animation: noise 0.2s infinite;
    }
    @keyframes noise {
      0% { transform: translate(0,0) } 10% { transform: translate(-1%,-1%) }
      20% { transform: translate(1%,1%) } 30% { transform: translate(-2%,1%) }
      100% { transform: translate(0,0) }
    }

    body { display: flex; font: 18px "Courier New", Courier, monospace; color: var(--main); z-index: 1; }
    .sidebar { display: flex; flex-direction: column; padding: 2em; width: 250px; border-right: 1px solid #333; height: 100vh; box-sizing: border-box; flex-shrink: 0; background: var(--bg); }
    #search-input { background: transparent; border: none; border-bottom: 1px solid var(--alt); color: var(--alt); font-family: inherit; font-size: 0.9em; outline: none; width: 100%; margin-bottom: 1.5em; display: none; padding: 5px 0; }
    h1 { font-size: 1.1em; margin: 0; text-transform: lowercase; letter-spacing: 1px; }
    .status-row { display: flex; gap: 10px; font-size: 0.6em; opacity: 0.5; margin-bottom: 2em; margin-top: 8px; }
    #timer { color: var(--alt); cursor: pointer; border-left: 1px solid #333; padding-left: 10px; }
    ul { list-style: none; padding: 0; margin-bottom: 1.5em; }
    li { line-height: 1.8em; }
    li.head { font-weight: bold; margin-bottom: 0.5em; text-transform: uppercase; letter-spacing: 1px; font-size: 0.8em; }
    a { color: inherit; text-decoration: none; }
    a:hover { color: var(--alt); }
    .separator { border-top: 1px solid #333; margin: 1em 0; width: 40%; }
    .notes-container { display: flex; flex-direction: column; margin-bottom: 1em; flex-grow: 1; }
    textarea { flex-grow: 1; background: repeating-linear-gradient(transparent, transparent 30px, #333 30px, #333 31px); border: none; outline: none; color: var(--main); font-family: inherit; font-size: 0.9em; resize: none; width: 100%; line-height: 31px; }
    
    .cal-container { margin-top: 1em; margin-bottom: 1em; font-size: 0.6em; width: 100%; opacity: 0.6; }
    .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; row-gap: 8px; }
    .day-name { font-weight: bold; opacity: 0.5; margin-bottom: 4px; }
    .today { color: var(--alt); font-weight: bold; opacity: 1; }

    /* Fixed Countdown Styling */
    .exam-countdown { 
      margin-top: 1em; 
      font-size: 0.55em; 
      letter-spacing: 1px; 
      color: var(--alt); 
      opacity: 0.8;
      text-align: center;
      border-top: 1px solid #333;
      padding-top: 1.5em;
      white-space: nowrap;
      width: 100%;
    }

    .bonsai-wrap { margin-top: auto; padding-top: 10px; display: flex; justify-content: center; opacity: 0.4; min-height: 60px; }
    #bonsai { font-size: 10px; line-height: 1.2; white-space: pre; font-family: monospace; text-align: center; }
    
    .main-content { flex-grow: 1; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; padding-right: 15%; }
    .img-wrap { width: 12em; display: flex; flex-direction: column; }
    img { border: 1px solid rgba(255,255,255,0.2); width: 100%; height: 18em; object-fit: cover; }
    .quote-wrap { margin-top: 1.2em; font-size: 0.7em; font-weight: bold; line-height: 1.5; opacity: 0.6; text-align: left; }
  </style>
</head>
<body onkeydown="handleGlobalKey(event)">
  <div class="sidebar">
    <input type="text" id="search-input" placeholder="searching..." onkeydown="handleSearch(event)">
    <h1 id="greeting">...</h1>
    <div class="status-row">
        <div id="weather">--°C</div>
        <div id="timer" onclick="toggleTimer()">00:00</div>
    </div>
    <ul>
      <li class="head">General</li>
      <li><a href="https://www.youtube.com/watch?v=nw0rszLsVz4&list=PLeobkCNVRVXx7UfXCdypcGIIfmeIiYUzp" target="_blank">Playlist</a></li>
      <li><a href="https://gemini.google.com/" target="_blank">Gemini</a></li>
      <li><a href="https://www.instagram.com/" target="_blank">Instagram</a></li>
    </ul>
    <div class="separator"></div>
    <div class="notes-container"><textarea id="notes-area" spellcheck="false"></textarea></div>
    <div class="separator"></div>
    
    <div class="cal-container">
      <div id="cal-month" style="font-weight:bold; margin-bottom:12px; text-transform:uppercase;"></div>
      <div class="cal-grid" id="calendar">
        <div class="day-name">S</div><div class="day-name">M</div><div class="day-name">T</div><div class="day-name">W</div><div class="day-name">T</div><div class="day-name">F</div><div class="day-name">S</div>
      </div>
    </div>

    <div class="exam-countdown" id="exam-cd">CALCULATING...</div>

    <div class="bonsai-wrap">
      <div id="bonsai">_</div>
    </div>
  </div>

  <div class="main-content">
      <div class="img-wrap">
          <img src="griffith.png" alt="Griffith">
          <div class="quote-wrap">
              <div>For they are dead</div>
              <div>because they have no dreams</div>
          </div>
      </div>
  </div>

  <script>
    let totalSeconds = parseInt(localStorage.getItem('bonsai_life')) || 0;
    let sessionSeconds = 0;
    let timerInterval = null;
    const treeStages = ["_", " | ", "\\|/", " w|w ", " (ww) \n  |  ", " (wwww)\n (wwww)\n   ||  "];

    function updateBonsai() {
        let stage = Math.min(Math.floor(totalSeconds / 300), treeStages.length - 1);
        document.getElementById('bonsai').innerText = treeStages[stage];
    }

    function toggleTimer() {
        if (timerInterval) { 
            clearInterval(timerInterval); 
            timerInterval = null; 
        } else { 
            timerInterval = setInterval(() => {
                sessionSeconds++;
                totalSeconds++;
                localStorage.setItem('bonsai_life', totalSeconds);
                let m = Math.floor(sessionSeconds/60).toString().padStart(2,'0');
                let s = (sessionSeconds%60).toString().padStart(2,'0');
                document.getElementById('timer').innerText = `${m}:${s}`;
                updateBonsai();
            }, 1000); 
        }
    }

    const hour = new Date().getHours();
    const g = document.getElementById('greeting');
    if (hour >= 0 && hour < 3) g.innerText = "the moon is high.";
    else if (hour >= 3 && hour < 6) g.innerText = "rest is for the weak?";
    else if (hour >= 6 && hour < 9) g.innerText = "wake up.";
    else if (hour >= 9 && hour < 12) g.innerText = "get to work.";
    else if (hour >= 12 && hour < 17) g.innerText = "staying focused.";
    else if (hour >= 17 && hour < 21) g.innerText = "the sun is setting.";
    else g.innerText = "still at it.";

    updateBonsai();
    const na = document.getElementById('notes-area');
    na.value = localStorage.getItem('sazi_notes') || "";
    na.oninput = () => localStorage.setItem('sazi_notes', na.value);

    const now = new Date();
    document.getElementById('cal-month').innerText = `${["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][now.getMonth()]} ${now.getFullYear()}`;
    const grid = document.getElementById('calendar');
    const first = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
    const total = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
    let html = '';
    for (let i = 0; i < first; i++) html += '<div></div>';
    for (let d = 1; d <= total; d++) {
      html += `<div ${d === now.getDate() ? 'class="today"' : ''}>${d}</div>`;
    }
    grid.innerHTML += html;

    function updateExamCountdown() {
      const examDate = new Date('February 17, 2026 00:00:00');
      const diff = examDate - new Date();
      const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
      document.getElementById('exam-cd').innerText = `[ ${days} DAYS UNTIL FEB 17 ]`;
    }
    updateExamCountdown();

    navigator.geolocation.getCurrentPosition(pos => {
      fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&current_weather=true`)
        .then(r => r.json()).then(d => {
          document.getElementById('weather').innerText = `${Math.round(d.current_weather.temperature)}°C`;
        });
    });

    function handleGlobalKey(e) {
      if (document.activeElement.tagName === 'TEXTAREA' || document.activeElement.tagName === 'INPUT') return;
      if (e.key.length === 1 && e.key !== ' ') {
        const s = document.getElementById('search-input');
        s.style.display = 'block'; s.focus();
      }
    }

    function handleSearch(e) {
      if (e.key === 'Enter') {
        const v = e.target.value.toLowerCase().trim();
        const shortCodes = { 'yt': 'https://youtube.com', 'ig': 'https://instagram.com', 'gm': 'https://gemini.google.com' };
        if (shortCodes[v]) {
          window.location.href = shortCodes[v];
        } else if (v.includes('.') && !v.includes(' ')) {
          window.location.href = v.startsWith('http') ? v : `https://${v}`;
        } else {
          window.location.href = `https://www.google.com/search?q=${encodeURIComponent(v)}`;
        }
      }
      if (e.key === 'Escape') { e.target.style.display = 'none'; e.target.value = ''; }
    }
  </script>
</body>
</html>
